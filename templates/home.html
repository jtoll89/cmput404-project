
{% extends 'base.html' %}

{% block content %}
 <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
 <script src="/static/js/js.cookie.js"></script>
<div class="container">
<div class="row">

<div class="jumbotron">
  <h1>Hello</h1>
  <p>You are on your Dashboard</p>

</div>
</div>
</div>

<div class="entry">

</div>
<script type="text/javascript">
$.ajax({
    url: "/service/author/posts",
    type: "GET",
    dataType: 'json',
    complete: function (data) {
        var news = document.getElementsByClassName("entry")[0];
        var ret_text = JSON.parse(data.responseText);
        var posts = ret_text["posts"];
        for (var i = 0; i <= posts.length; ++i) {
          var h5 = document.createElement("h5");
          h5.innerHTML = "TITLE: " + posts[i].title;
          news.appendChild(h5);
          var p = document.createElement("p");
          p.innerHTML = "description: " + posts[i].description;
          news.appendChild(p);

          if (posts[i].comments.length === 0) {
            var p2 = document.createElement("p");
            p2.innerHTML = "There are no comments for this post"
            news.appendChild(p2);
          }
          else{
            var comments = posts[i].comments;
            console.log(comments.length);
            for (var i = 0; i < comments.length; ++i){
              var p2 = document.createElement("p");
              p2.innerHTML = "Comment: " + comments[i].comment;
              news.appendChild(p2);
            }
          }
          var text = document.createElement("input");
          text.type = "text";
          news.appendChild(text);
          var btn = document.createElement("BUTTON");
          var t = document.createTextNode("Add a Comment");
          btn.appendChild(t);
          news.appendChild(btn);

        }
    }
});

</script>
{% endblock %}
